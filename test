def get_response(URL):
    import requests

    burp_proxy = "http://127.0.0.1:8080"
    proxies = {
        "http": burp_proxy,
        "https": burp_proxy,
    }
    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36",
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",
        "Accept-Encoding": "gzip, deflate",
        "Accept-Language": "en-AU,en;q=0.9,en-GB;q=0.8,en-US;q=0.7,zh-CN;q=0.6,zh;q=0.5,zh-TW;q=0.4,vi;q=0.3,pl;q=0.2",
    }

    return requests.get(URL, headers=headers, proxies=proxies, verify=False).content

import socket

s = socket.socket()
host = "127.0.0.1"
port = 12345
s.bind((host,port))
s.listen(20)
while True:
    conn, addr = s.accept()
    headers = conn.recv(4096)
    host_lines = headers.split("\n")
    for line in host_lines:
        if "HOST:" in line:
            host = line[6:]
            break
    protocol = "https" if port == "443" else "http"
    host = protocol + "://" + url + ":" + port
    print headers
    print host
    conn.close()
